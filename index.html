<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WeatherApp</title>
  </head>
  <body>
    <script>
      async function getWeather(location) {
        // TODO: add error-catching!
        const response = await fetch(
          `https://api.openweathermap.org/data/2.5/weather?q=${location}&appid=04677966a703b0124f576651b3349deb&units=metric`
        );

        const weather = await response.json();
        return weather;
      }

      async function createWeatherObject(location) {
        const data = await getWeather(location);
        // log data for reference for now
        console.log(data);
        return {
          location: data.name,
          country: data.sys.country,
          temperature: data.main.temp,
          weather: data.weather[0].description,
          wind: data.wind.speed,
          cloudiness: data.clouds.all,
          // icons would be awesome too: https://openweathermap.org/weather-conditions#How-to-get-icon-URL
        };
      }

      createWeatherObject("Vienna").then((obj) => console.log(obj));
    </script>
  </body>
</html>
